<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Zephyr</title>
<style>
body{margin:0;font-family:sans-serif;background-color:#333333} /* Background color changed to dark gray */
.C{max-width:600px;margin:0 auto;padding:20px;color:#ffffff} /* Added white text color */
.center{text-align:center}
.R{display:flex;flex-wrap:wrap;margin-bottom:10px;align-items:center}
.C-12,.C-6,.C-4,.C-3{padding:0 5px;box-sizing:border-box}
.C-12{width:100%}
.C-6{width:50%;text-align:center}
.C-4{width:33.333%}
.C-3{width:25%;text-align:center}
.H5{margin:5px 0;font-size:1.1em;font-weight:400}
input[type="number"]{width:80px;display:block;margin:0 auto;color:#000;background-color:#fff;border:1px solid #ccc;padding:5px} /* Ensured input text/background is visible */
.B{border:none;border-radius:2px;height:36px;line-height:36px;padding:0 16px;text-transform:uppercase;color:#fff;cursor:pointer;display:block;width:100%;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14);transition:background-color .3s}
.B:active{box-shadow:0 4px 5px 0 rgba(0,0,0,0.14)}
.S{position:relative;display:inline-block;width:50px;height:26px;vertical-align:middle}
.S input{opacity:0;width:0;height:0}
.L{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s;border-radius:34px}
.L:before{position:absolute;content:"";height:18px;width:18px;left:4px;bottom:4px;background-color:#fff;transition:.4s;border-radius:50%}
.S input:checked+.L{background-color:#2196F3}
.S input:focus+.L{box-shadow:0 0 1px #2196F3}
.S input:checked+.L:before{transform:translateX(24px)}
.B:disabled {
  background-color: #b0b0b0 !important;
  color: #666 !important;
  cursor: not-allowed;
  opacity: 0.6;
  box-shadow: none;
}

#btn_save_settings:disabled {
  background-color: #888 !important;
  color: #fff !important;
  border: 2px solid #F7994E !important;
  opacity: 0.7;
}
</style>
</head>
<body>

<main>
  <div class="C">
    <!-- Settings Section -->
    <div class="settings-section" style="margin:24px 0; padding:16px; background:#222; border-radius:8px; border:2px solid #F7994E; color:#fff; box-shadow:0 2px 8px rgba(0,0,0,0.2);">
      <h3 style="margin-top:0; margin-bottom:8px; font-size:1.2em; color:#F7994E;">Settings</h3>
      <div class="R" style="margin-top:10px"><div class="C-3">Fan Mode</div><div class="C-3">Enabled</div><div class="C-6">Target Heart Rate</div></div>
      <form class="C-12" id="user_settings_form" method="post" action="">
        <div class="R">
          <div class="C-3"><label><span class="H5">1</span></label></div>
          <div class="C-3"><div class="S"><label><input type="checkbox" id="en1" name="en1"><span class="L"></span></label></div></div>
          <div class="C-6"><input type="number" id="hr1" name="hr1" min="0" max="100" value="0"></div>
        </div>
        <div class="R">
          <div class="C-3"><label><span class="H5">2</span></label></div>
          <div class="C-3"><div class="S"><label><input type="checkbox" id="en2" name="en2"><span class="L"></span></label></div></div>
          <div class="C-6"><input type="number" id="hr2" name="hr2" min="0" max="100" value="0"></div>
        </div>
        <div class="R">
          <div class="C-3"><label><span class="H5">3</span></label></div>
          <div class="C-3"><div class="S"><label><input type="checkbox" id="en3" name="en3"><span class="L"></span></label></div></div>
          <div class="C-6"><input type="number" id="hr3" name="hr3" min="0" max="100" value="0"></div>
        </div>
        <div class="R" style="margin-top:16px;">
          <div class="C-12 center">
            <button class="B" id="btn_save_settings" style="background-color:#F7994E; min-width:120px;" type="button" onclick="onSaveSettingsClick()">Save</button>
          </div>
        </div>
      </form>
    </div>

    <!-- Controls Section (now green border) -->
    <div class="controls-section" style="margin:24px 0; padding:16px; background:#222; border-radius:8px; border:2px solid #43A047; color:#fff; box-shadow:0 2px 8px rgba(0,0,0,0.2);">
      <h3 style="margin-top:0; margin-bottom:8px; font-size:1.2em; color:#43A047;">Controls</h3>
      <div class="C">
        <div class="R">
          <div class="C-4 center"><button class="B" id="btn_manual_mode_1" style="background-color:#F7994E" onclick="onFanModeButtonClick(1)">1</button></div>
          <div class="C-4 center"><button class="B" id="btn_manual_mode_2" style="background-color:#F7994E" onclick="onFanModeButtonClick(2)">2</button></div>
          <div class="C-4 center"><button class="B" id="btn_manual_mode_3" style="background-color:#F7994E" onclick="onFanModeButtonClick(3)">3</button></div>
        </div>
        <div class="R">
          <div class="C-4 center"><button class="B" id="btn_manual_mode_1" style="background-color:#3F3B3B" onclick="onFanModeButtonClick(0)">OFF</button></div>
          <div class="C-4 center"><button class="B" id="btn_ble_scan" style="background-color:#0076F7" onclick="onBleScanButtonClick()">SCAN</button></div>
          <div class="C-4 center"><button class="B" id="btn_reset" style="background-color:#a72525" onclick="onResetButtonClick()">RESET</button></div>
        </div>
      </div>
    </div>

    <!-- Wireless Status Section -->
    <div class="wlan-status-section" style="margin:24px 0; padding:16px; background:#222; border-radius:8px; border:2px solid #e0e0e0; color:#fff; box-shadow:0 2px 8px rgba(0,0,0,0.2);">
      <h3 style="margin-top:0; margin-bottom:8px; font-size:1.2em; color:#e0e0e0;">Wireless Status</h3>
      <div style="font-size:1em;">
        WLAN Status: <span id="wlan_status" style="font-weight:bold;">Unknown</span><br>
        Network: <span id="wlan_network_name" style="font-weight:bold;">None</span>
      </div>
    </div>

    <!-- Bluetooth Status Section -->
    <div class="ble-status-section" style="margin:24px 0; padding:16px; background:#222; border-radius:8px; border:2px solid #2196F3; color:#fff; box-shadow:0 2px 8px rgba(0,0,0,0.2);">
      <h3 style="margin-top:0; margin-bottom:8px; font-size:1.2em; color:#2196F3;">Bluetooth Status</h3>
      <div style="font-size:1em; margin-bottom:12px;">
        BLE Status: <span id="ble_status" style="font-weight:bold;">Unknown</span><br>
        Device: <span id="ble_device_name" style="font-weight:bold;">None</span>
      </div>
      <div style="margin-bottom:12px;">
        <label for="ble_nearby_devices" style="font-size:0.95em; color:#bbb;">Nearby Devices:</label><br>
        <select id="ble_nearby_devices" size="4" style="width:100%; background:#333; color:#fff; border-radius:4px; border:1px solid #555; margin-top:4px;">
        </select>
      </div>
      <div style="text-align:right;">
        <button class="B" id="btn_ble_connect" style="background-color:#2196F3; min-width:120px; margin-bottom:8px;" onclick="onBleConnectButtonClick()">Connect</button>
      </div>
      <div style="text-align:right;">
        <button class="B" id="btn_ble_disconnect" style="background-color:#F7994E; min-width:120px; color:#fff;" onclick="onBleDisconnectButtonClick()">Disconnect</button>
      </div>
    </div>
  </div>
</main>
<script src="resources/js/zephyr.js"></script>
<script defer>
  document.addEventListener('DOMContentLoaded', function() {
    loadUserConfig();
    setInterval(onStatusUpdate, 10000);
  });
</script>
</body></html>